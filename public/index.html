<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unite Pet Salon Gallery | é«˜ç´šãƒšãƒƒãƒˆã‚µãƒ­ãƒ³</title>
    
    <!-- Unite Design System -->
    <link rel="stylesheet" href="unite-design.css">
    <link rel="stylesheet" href="unite-components.css">
    <link rel="stylesheet" href="style.css">
    
    <!-- Icons -->
    <script src="https://unpkg.com/feather-icons"></script>
    <script>
        window.tailwind = window.tailwind || {};
        window.tailwind.config = {
            corePlugins: {
                preflight: false
            },
            theme: {
                extend: {
                    colors: {
                        uniteTeal: '#A8F1E5',
                        uniteMidnight: '#1E293B',
                        unitePearl: '#F8FAFC'
                    },
                    boxShadow: {
                        'unite-glow': '0 25px 60px rgba(15, 23, 42, 0.18)'
                    }
                }
            }
        };
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Firebase SDK (defer to avoid blocking initial render) -->
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-storage-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-functions-compat.js"></script>
    
    <!-- Firebase Configuration -->
    <script defer src="firebase-config.js"></script>
</head>

<body class="loading antialiased">
    <script>
        (function() {
            var FALLBACK_DELAY = 1200;
            function showLoginFallback() {
                var body = document.body;
                if (!body) return;
                body.classList.remove('loading');
                var login = document.getElementById('loginScreen');
                if (login) {
                    login.style.display = 'flex';
                    login.style.opacity = '1';
                    login.style.visibility = 'visible';
                }
            }
            var ready = document.readyState;
            if (ready === 'interactive' || ready === 'complete') {
                setTimeout(showLoginFallback, FALLBACK_DELAY);
            } else {
                document.addEventListener('DOMContentLoaded', function() {
                    setTimeout(showLoginFallback, FALLBACK_DELAY);
                });
            }
        })();
    </script>

    <noscript>
        <div style="padding: 2rem; text-align: center; color: #64748b;">
            <p>JavaScript is required to access this gallery.</p>
        </div>
    </noscript>

    <!-- LOGIN SCREEN -->
    <div id="loginScreen" class="unite-login-screen relative">
        <div class="unite-login-container shadow-unite-glow ring-1 ring-white/60">
            <div class="unite-login-header">
                <h1 id="loginTitle" class="unite-login-title">Unite Gallery</h1>
                <p class="unite-login-subtitle">Pet Salon Gallery Access</p>
            </div>
            
            <div class="unite-login-form">
                <div class="unite-auth-tabs">
                    <button class="unite-auth-tab active" data-tab="email">Email</button>
                    <button class="unite-auth-tab" data-tab="google">Google</button>
                </div>
                
                <div class="unite-auth-content" id="emailAuth">
                    <form id="emailLoginForm" role="form" aria-labelledby="loginTitle">
                        <div class="unite-form-group">
                            <label for="loginEmail">Email Address</label>
                            <input type="email" id="loginEmail" name="email" autocomplete="email" required placeholder="your@email.com" aria-label="Email Address">
                        </div>
                        <div class="unite-form-group">
                            <label for="loginPassword">Password</label>
                            <input type="password" id="loginPassword" name="password" autocomplete="current-password" required placeholder="Password" aria-label="Password">
                        </div>
                        <button type="submit" class="unite-btn unite-btn-primary unite-login-btn transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-uniteTeal/70">
                            <i data-feather="log-in"></i>
                            Enter Gallery
                        </button>
                    </form>
                    
                    <div style="text-align: center; margin-top: var(--unite-space-lg); padding-top: var(--unite-space-lg); border-top: 1px solid var(--unite-pearl);">
                        <p style="font-size: var(--unite-text-sm); color: var(--unite-graphite); margin: 0; font-weight: 500;">
                            Authorized Access Only
                        </p>
                        <p style="font-size: var(--unite-text-xs); color: var(--unite-steel); margin-top: var(--unite-space-xs); margin-bottom: 0;">
                            è¨±å¯ã•ã‚ŒãŸã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã§ã™
                        </p>
                    </div>

                </div>
                
                <div class="unite-auth-content" id="googleAuth" style="display: none;">
                    <button id="googleLoginButton" class="unite-btn unite-btn-outline unite-login-btn transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-uniteTeal/60">
                        <svg width="20" height="20" viewBox="0 0 24 24">
                            <path fill="#4285f4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                            <path fill="#34a853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                            <path fill="#fbbc05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                            <path fill="#ea4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                        </svg>
                        Sign in with Google
                    </button>
                </div>
                
                <div class="unite-auth-error" id="authError" style="display: none;"></div>
            </div>
        </div>
    </div>

    <!-- MAIN CONTENT (Hidden until authenticated) -->
    <div id="mainContent" class="unite-main-content" style="display: none; opacity: 0; visibility: hidden;">
        <!-- User Info Header -->
        <div class="unite-user-header shadow-sm shadow-slate-200/70">
            <div class="unite-user-info">
                <span id="userDisplayName">Loading...</span>
                <button id="logoutBtn" class="unite-btn unite-btn-ghost focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-uniteTeal/50">
                    <i data-feather="log-out"></i>
                    Logout
                </button>
            </div>
        </div>
        
        <!-- UNITE GALLERY HERO -->
        <div class="unite-hero">
        <div class="unite-hero-content">
            <div class="unite-hero-text">
                <h1 class="unite-hero-title">
                    Unite Gallery<br>
                    <span class="unite-hero-subtitle">Pet Salon</span>
                </h1>
                <p class="unite-hero-description">
                    é™å¯‚ãªç©ºé–“ã§ã€æ„›ã™ã‚‹ãƒšãƒƒãƒˆã¨ã®ç‰¹åˆ¥ãªæ™‚é–“ã‚’ã€‚<br>
                    ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã®ã‚ˆã†ãªç¾ã—ã•ã¨ã€æœ€é«˜ç´šã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚
                </p>
            </div>
        </div>
        <div class="unite-hero-image">
            <!-- ã“ã“ã«å¤§ããªãƒšãƒƒãƒˆå†™çœŸãŒå…¥ã‚Šã¾ã™ -->
            <div style="width: 100%; height: 500px; background: var(--unite-gradient-whisper); border-radius: var(--unite-radius-lg); display: flex; align-items: center; justify-content: center; color: var(--unite-graphite); font-size: var(--unite-text-sm);">
                Pet Gallery Image Area
            </div>
        </div>
    </div>

    <!-- MAIN EXHIBITION SPACE -->
    <div class="unite-container">
        
        <!-- TODAY'S EXHIBITION - Reservation Timeline -->
        <div class="unite-editorial-section">
            <div class="unite-editorial-header">
                <h2 class="unite-editorial-title">Today's Exhibition</h2>
                <p class="unite-editorial-subtitle">æœ¬æ—¥ã®äºˆç´„ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</p>
            </div>
            
            <div class="unite-timeline">
                <div class="unite-timeline-item">
                    <div class="unite-timeline-time">
                        09:00<br>
                        <span style="font-size: var(--unite-text-xs); color: var(--unite-graphite);">AM</span>
                    </div>
                    <div class="unite-timeline-content">
                        <div class="unite-guest-profile">
                            <img src="" alt="ãƒšãƒƒãƒˆå†™çœŸ" class="unite-pet-photo" style="background: linear-gradient(45deg, var(--unite-blue-silk), var(--unite-blue-serene));">
                            <div class="unite-guest-info">
                                <h4>ãƒ«ãƒŠã¡ã‚ƒã‚“</h4>
                                <div class="unite-pet-details">
                                    ãƒˆã‚¤ãƒ—ãƒ¼ãƒ‰ãƒ«ãƒ»3æ­³ãƒ»ã‚ªãƒ¼ãƒŠãƒ¼ï¼šç”°ä¸­æ§˜<br>
                                    ã‚·ãƒ£ãƒ³ãƒ—ãƒ¼ãƒ»ã‚«ãƒƒãƒˆãƒ»çˆªåˆ‡ã‚Šãƒ»è€³æƒé™¤
                                </div>
                                <div class="unite-service-tags">
                                    <span class="unite-service-tag">Premium Spa</span>
                                    <span class="unite-service-tag">Style Cut</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="unite-timeline-status">
                        <span class="unite-status unite-status-confirmed">Confirmed</span>
                    </div>
                </div>

                <div class="unite-timeline-item">
                    <div class="unite-timeline-time">
                        10:30<br>
                        <span style="font-size: var(--unite-text-xs); color: var(--unite-graphite);">AM</span>
                    </div>
                    <div class="unite-timeline-content">
                        <div class="unite-guest-profile">
                            <img src="" alt="ãƒšãƒƒãƒˆå†™çœŸ" class="unite-pet-photo" style="background: linear-gradient(45deg, var(--unite-blue-mist), var(--unite-blue-serene));">
                            <div class="unite-guest-info">
                                <h4>ãƒãƒ§ã‚³ãã‚“</h4>
                                <div class="unite-pet-details">
                                    æŸ´çŠ¬ãƒ»5æ­³ãƒ»ã‚ªãƒ¼ãƒŠãƒ¼ï¼šä½è—¤æ§˜<br>
                                    ã‚·ãƒ£ãƒ³ãƒ—ãƒ¼ãƒ»ãƒ–ãƒ­ãƒ¼ãƒ»éƒ¨åˆ†ã‚«ãƒƒãƒˆ
                                </div>
                                <div class="unite-service-tags">
                                    <span class="unite-service-tag">Basic Care</span>
                                    <span class="unite-service-tag">Nail Trim</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="unite-timeline-status">
                        <span class="unite-status unite-status-progress">In Progress</span>
                    </div>
                </div>

                <div class="unite-timeline-item">
                    <div class="unite-timeline-time">
                        14:00<br>
                        <span style="font-size: var(--unite-text-xs); color: var(--unite-graphite);">PM</span>
                    </div>
                    <div class="unite-timeline-content">
                        <div class="unite-guest-profile">
                            <img src="" alt="ãƒšãƒƒãƒˆå†™çœŸ" class="unite-pet-photo" style="background: linear-gradient(45deg, var(--unite-blue-whisper), var(--unite-blue-mist));">
                            <div class="unite-guest-info">
                                <h4>ãƒŸãƒŸã¡ã‚ƒã‚“</h4>
                                <div class="unite-pet-details">
                                    ãƒãƒ«ãƒãƒ¼ã‚ºãƒ»2æ­³ãƒ»ã‚ªãƒ¼ãƒŠãƒ¼ï¼šå±±ç”°æ§˜<br>
                                    ãƒ•ãƒ«ã‚³ãƒ¼ã‚¹ãƒ»ã‚¢ãƒ­ãƒãƒã‚¹ãƒ»æ¯›ç‰å–ã‚Š
                                </div>
                                <div class="unite-service-tags">
                                    <span class="unite-service-tag">Luxury Spa</span>
                                    <span class="unite-service-tag">Aromatherapy</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="unite-timeline-status">
                        <span class="unite-status unite-status-pending">Pending</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ATTENTION GALLERY -->
        <div class="unite-editorial-section">
            <div class="unite-editorial-header">
                <h2 class="unite-editorial-title">Attention Gallery</h2>
                <p class="unite-editorial-subtitle">ç‰¹åˆ¥ãªã‚±ã‚¢ãŒå¿…è¦ãªã‚²ã‚¹ãƒˆæ§˜</p>
            </div>
            
            <div class="unite-attention-grid">
                <div class="unite-attention-card">
                    <div class="unite-attention-header">
                        <img src="" alt="ãƒšãƒƒãƒˆå†™çœŸ" class="unite-attention-photo" style="background: linear-gradient(45deg, #fbbf24, #f59e0b);">
                        <div class="unite-attention-info">
                            <h5>ãƒãƒŠã¡ã‚ƒã‚“</h5>
                            <p class="unite-attention-owner">ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ãƒ¬ãƒˆãƒªãƒãƒ¼ãƒ»éˆ´æœ¨æ§˜</p>
                        </div>
                    </div>
                    <p class="unite-attention-note">
                        çš®è†šãŒæ•æ„ŸãªãŸã‚ã€ä½åˆºæ¿€ã‚·ãƒ£ãƒ³ãƒ—ãƒ¼ã‚’ä½¿ç”¨ã€‚ãƒ‰ãƒ©ã‚¤ãƒ¤ãƒ¼ã®æ¸©åº¦ã¯ä½ã‚ã«è¨­å®šã—ã¦ãã ã•ã„ã€‚
                    </p>
                    <div class="unite-attention-tags">
                        <span class="unite-attention-tag unite-tag-medical">Medical</span>
                    </div>
                </div>

                <div class="unite-attention-card">
                    <div class="unite-attention-header">
                        <img src="" alt="ãƒšãƒƒãƒˆå†™çœŸ" class="unite-attention-photo" style="background: linear-gradient(45deg, #ef4444, #dc2626);">
                        <div class="unite-attention-info">
                            <h5>ã‚¿ãƒ­ã‚¦ãã‚“</h5>
                            <p class="unite-attention-owner">ç§‹ç”°çŠ¬ãƒ»é«˜æ©‹æ§˜</p>
                        </div>
                    </div>
                    <p class="unite-attention-note">
                        åˆå›æ¥åº—ã§ç·Šå¼µã—ã¦ã„ã¾ã™ã€‚ã‚†ã£ãã‚Šã¨æ…£ã‚‰ã—ãªãŒã‚‰ä½œæ¥­ã‚’é€²ã‚ã¦ãã ã•ã„ã€‚
                    </p>
                    <div class="unite-attention-tags">
                        <span class="unite-attention-tag unite-tag-behavioral">Behavioral</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- COLLECTION ANALYTICS -->
        <div class="unite-editorial-section">
            <div class="unite-analytics">
                <div class="unite-analytics-header">
                    <div>
                        <h2 class="unite-analytics-title">Collection Analytics</h2>
                        <p class="unite-analytics-subtitle">ã‚µãƒ­ãƒ³ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ»ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹</p>
                    </div>
                    <div class="unite-period-tabs">
                        <button class="unite-period-tab active">Today</button>
                        <button class="unite-period-tab">Week</button>
                        <button class="unite-period-tab">Month</button>
                    </div>
                </div>
                
                <div class="unite-chart-area">
                    <div class="unite-chart-placeholder">
                        ğŸ“Š Chart Area<br>
                        <span style="color: var(--unite-steel); font-size: var(--unite-text-xs);">
                            äºˆç´„æ•°ãƒ»å£²ä¸Šãƒ»é¡§å®¢æº€è¶³åº¦ã®ã‚°ãƒ©ãƒ•ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ACTIVITY EXHIBITION -->
        <div class="unite-editorial-section">
            <div class="unite-editorial-header">
                <h2 class="unite-editorial-title">Activity Exhibition</h2>
                <p class="unite-editorial-subtitle">æœ¬æ—¥ã®ã‚µãƒ­ãƒ³æ´»å‹•å±¥æ­´</p>
            </div>
            
            <div class="unite-activity">
                <div class="unite-activity-list">
                    <div class="unite-activity-item">
                        <div class="unite-activity-icon" style="background: var(--unite-blue-silk); color: var(--unite-blue-refined);">
                            <i data-feather="calendar"></i>
                        </div>
                        <div class="unite-activity-content">
                            <h6>æ–°è¦äºˆç´„ã‚’å—ä»˜</h6>
                            <p>ã‚‚ã‚‚ã¡ã‚ƒã‚“ï¼ˆãƒãƒ¯ãƒ¯ï¼‰ã®äºˆç´„ã‚’æ˜æ—¥15:00ã§å—ä»˜ã„ãŸã—ã¾ã—ãŸã€‚</p>
                        </div>
                        <div class="unite-activity-time">
                            10åˆ†å‰
                        </div>
                    </div>

                    <div class="unite-activity-item">
                        <div class="unite-activity-icon" style="background: var(--unite-purple-mist); color: var(--unite-steel);">
                            <i data-feather="check-circle"></i>
                        </div>
                        <div class="unite-activity-content">
                            <h6>ã‚µãƒ¼ãƒ“ã‚¹å®Œäº†</h6>
                            <p>ãƒãƒ§ã‚³ãã‚“ï¼ˆæŸ´çŠ¬ï¼‰ã®ã‚·ãƒ£ãƒ³ãƒ—ãƒ¼ãƒ»ã‚«ãƒƒãƒˆãŒå®Œäº†ã—ã¾ã—ãŸã€‚</p>
                        </div>
                        <div class="unite-activity-time">
                            25åˆ†å‰
                        </div>
                    </div>

                    <div class="unite-activity-item">
                        <div class="unite-activity-icon" style="background: var(--unite-mist); color: var(--unite-graphite);">
                            <i data-feather="edit-3"></i>
                        </div>
                        <div class="unite-activity-content">
                            <h6>é¡§å®¢æƒ…å ±ã‚’æ›´æ–°</h6>
                            <p>ãƒ«ãƒŠã¡ã‚ƒã‚“ã®å¥åº·çŠ¶æ…‹ãƒ»ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼æƒ…å ±ã‚’æ›´æ–°ã—ã¾ã—ãŸã€‚</p>
                        </div>
                        <div class="unite-activity-time">
                            1æ™‚é–“å‰
                        </div>
                    </div>

                    <div class="unite-activity-item">
                        <div class="unite-activity-icon" style="background: var(--unite-blue-serene); color: white;">
                            <i data-feather="dollar-sign"></i>
                        </div>
                        <div class="unite-activity-content">
                            <h6>ãŠæ”¯æ‰•ã„å‡¦ç†</h6>
                            <p>ç”°ä¸­æ§˜ï¼ˆãƒ«ãƒŠã¡ã‚ƒã‚“ã®é£¼ã„ä¸»ï¼‰ã‹ã‚‰ã®ãŠæ”¯æ‰•ã„ã‚’å—ã‘å–ã‚Šã¾ã—ãŸã€‚</p>
                        </div>
                        <div class="unite-activity-time">
                            2æ™‚é–“å‰
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ACTION GALLERY -->
        <div class="unite-editorial-section">
            <div class="unite-editorial-header">
                <h2 class="unite-editorial-title">Quick Actions</h2>
                <p class="unite-editorial-subtitle">ã‚ˆãä½¿ç”¨ã™ã‚‹æ©Ÿèƒ½</p>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--unite-space-lg);">
                <button class="unite-btn unite-btn-primary" data-tab="calendar" style="justify-content: center; padding: var(--unite-space-lg);">
                    <i data-feather="plus-circle"></i>
                    æ–°è¦äºˆç´„ç™»éŒ²
                </button>
                
                <button class="unite-btn unite-btn-outline" data-tab="customer" style="justify-content: center; padding: var(--unite-space-lg);">
                    <i data-feather="users"></i>
                    é¡§å®¢ç®¡ç†
                </button>
                
                <button class="unite-btn unite-btn-outline" data-tab="ops" style="justify-content: center; padding: var(--unite-space-lg);">
                    <i data-feather="calendar"></i>
                    ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
                </button>
                
                <button class="unite-btn unite-btn-outline" data-tab="settings" style="justify-content: center; padding: var(--unite-space-lg);">
                    <i data-feather="settings"></i>
                    è¨­å®š
                </button>
            </div>
        </div>
    </div>

    <!-- Legacy operational interface will be injected below after login -->
    <div id="legacyAppMount" class="legacy-app-mount" aria-live="polite">
        <div class="legacy-app-placeholder">
            ã‚·ã‚¹ãƒ†ãƒ UIã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...
        </div>
    </div>

    <script>
        (function loadLegacyAppShell() {
            const mount = document.getElementById('legacyAppMount');
            const shellUrl = 'legacy-app-shell.html';

            function appendAppScript() {
                if (document.querySelector('script[data-legacy-app]')) {
                    return;
                }
                const script = document.createElement('script');
                script.src = 'app.js';
                script.async = false;
                script.setAttribute('data-legacy-app', 'true');
                document.body.appendChild(script);
            }

            function setPlaceholder(message) {
                if (!mount) return;
                mount.innerHTML = '<div class="legacy-app-placeholder">' + message + '</div>';
            }

            if (!mount) {
                console.warn('Legacy app mount point not found.');
                appendAppScript();
                return;
            }

            fetch(shellUrl, { cache: 'no-cache' })
                .then(function(response) {
                    if (!response.ok) {
                        throw new Error('Shell fetch failed: ' + response.status);
                    }
                    return response.text();
                })
                .then(function(markup) {
                    const template = document.createElement('template');
                    template.innerHTML = markup;
                    mount.replaceChildren(template.content.cloneNode(true));
                    appendAppScript();
                })
                .catch(function(err) {
                    console.error('Legacy shell load error:', err);
                    setPlaceholder('ã‚¢ãƒ—ãƒªUIã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚');
                    appendAppScript();
                });
        })();
    </script>
    </div>
    <!-- End of Main Content -->



    <script>
        // Firebase Configuration - Disabled for demo mode
        // ãƒ‡ãƒ¢ç’°å¢ƒã§ã¯Firebase APIå‘¼ã³å‡ºã—ã‚’é˜²æ­¢ã™ã‚‹ãŸã‚ã€ç„¡åŠ¹åŒ–
        // firebaseConfig will be declared below
        
        // æœ¬ç•ªç’°å¢ƒã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªè¨­å®šã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
        // const firebaseConfig = {
        //     apiKey: "your-real-api-key",
        //     authDomain: "your-project.firebaseapp.com",
        //     projectId: "your-project-id",
        //     storageBucket: "your-project.appspot.com",
        //     messagingSenderId: "your-sender-id",
        //     appId: "your-app-id"
        // };

        // Firebase initialization for Unite Gallery
        let firebaseApp = null;
        let isFirebaseInitialized = false;
        
        // FirebaseåˆæœŸåŒ–ã‚’ç¢ºå®Ÿã«å®Ÿè¡Œ
        function initializeFirebase() {
            console.log('ğŸ”¥ Starting Firebase initialization...');
            
            if (typeof firebase === 'undefined') {
                console.error('âŒ Firebase SDK not loaded');
                return false;
            }
            
            if (!window.firebaseConfig) {
                console.error('âŒ Firebase configuration not loaded');
                return false;
            }
            
            try {
                // Firebase AppåˆæœŸåŒ–
                if (firebase.apps.length === 0) {
                    firebaseApp = firebase.initializeApp(window.firebaseConfig);
                    console.log('âœ… Firebase App initialized successfully with external config');
                } else {
                    firebaseApp = firebase.apps[0];
                    console.log('âœ… Using existing Firebase App instance');
                }
                
                // Firebase Auth serviceæ¤œè¨¼
                if (!firebase.auth) {
                    throw new Error('Firebase Auth service not available');
                }
                
                // Auth serviceåˆæœŸåŒ–ãƒ†ã‚¹ãƒˆ
                const auth = firebase.auth();
                if (!auth) {
                    throw new Error('Cannot get Firebase Auth instance');
                }
                
                console.log('âœ… Firebase Auth service verified');
                isFirebaseInitialized = true;
                return true;
                
            } catch (error) {
                console.error('âŒ Firebase initialization failed:', error);
                firebaseApp = null;
                isFirebaseInitialized = false;
                return false;
            }
        }
        
        // Authentication State Management
        let currentUser = null;

        // æ­£å¸¸ãªåˆæœŸåŒ–ãƒ•ãƒ­ãƒ¼ç®¡ç†
        function completeInitialization() {
            // åˆæœŸåŒ–å®Œäº†æ™‚ã«loadingã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤
            document.body.classList.remove('loading');
            console.log('âœ… Unite GalleryåˆæœŸåŒ–å®Œäº† - ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹è§£é™¤');
        }

        // Check authentication state on load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ Unite GalleryåˆæœŸåŒ–é–‹å§‹...');
            
            // FirebaseåˆæœŸåŒ–ã‚’DOMContentLoadedå¾Œã«å®Ÿè¡Œï¼ˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ç¢ºå®ŸåŒ–ï¼‰
            const firebaseReady = initializeFirebase();
            
            try {
                // Initialize Feather Icons first
                if (typeof feather !== 'undefined' && feather.replace) {
                    feather.replace();
                    console.log('âœ… Feather icons initialized');
                } else {
                    console.log('âš ï¸ Feather icons not available');
                }
                
                // Firebaseèªè¨¼ç›£è¦–ã¯æ­£ã—ãåˆæœŸåŒ–ã•ã‚ŒãŸå ´åˆã®ã¿
                if (isFirebaseInitialized && typeof firebase !== 'undefined' && firebase.auth && firebaseApp) {
                    console.log('âœ… Firebase authentication monitoring started');
                    
                    // ç¾åœ¨ã®èªè¨¼çŠ¶æ…‹ã‚’å³åº§ã«ãƒã‚§ãƒƒã‚¯
                    const currentAuthUser = firebase.auth().currentUser;
                    if (currentAuthUser) {
                        console.log('ğŸ“ æ—¢å­˜ã®èªè¨¼ã‚»ãƒƒã‚·ãƒ§ãƒ³æ¤œå‡º:', currentAuthUser.email);
                        // æ—¢å­˜ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒã‚ã‚‹å ´åˆã€ã¡ã‚‰ã¤ãé˜²æ­¢ã®ãŸã‚ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã‚’ã‚¹ã‚­ãƒƒãƒ—
                        const authorizedUID = 'IbuYD2GuBTdS55LY5uuzBsHIF7s2';
                        if (currentAuthUser.uid === authorizedUID) {
                            console.log('ğŸ“ æ—¢å­˜ã‚»ãƒƒã‚·ãƒ§ãƒ³èªè¨¼æˆåŠŸ - ç›´æ¥ãƒ¡ã‚¤ãƒ³ç”»é¢ã¸');
                            currentUser = currentAuthUser;
                            window.currentUser = currentAuthUser;
                            showMainContent(currentAuthUser);
                        } else {
                            console.log('ğŸ“ æ—¢å­˜ã‚»ãƒƒã‚·ãƒ§ãƒ³èªè¨¼å¤±æ•— - ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ');
                            firebase.auth().signOut();
                            showLoginScreen();
                        }
                    } else {
                        console.log('ğŸ“ æ—¢å­˜ã‚»ãƒƒã‚·ãƒ§ãƒ³ãªã— - ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢è¡¨ç¤º');
                        // æ»‘ã‚‰ã‹ãªãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã§ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã‚’è¡¨ç¤º
                        setTimeout(() => {
                            showLoginScreen();
                        }, 100);
                    }
                    
                    firebase.auth().onAuthStateChanged((user) => {
                        const authorizedUID = 'IbuYD2GuBTdS55LY5uuzBsHIF7s2';
                        
                        if (user) {
                            // Check if the user's UID is authorized
                            if (user.uid === authorizedUID) {
                                console.log('Firebase user login detected - authorized UID:', user.email);
                                currentUser = user;
                                window.currentUser = user;
                                showMainContent(user);
                            } else {
                                console.log('Firebase user login detected - unauthorized UID:', user.uid);
                                firebase.auth().signOut();
                                showLoginScreen();
                                showAuthError('ã“ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯è¨±å¯ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚');
                            }
                        } else {
                            // User is signed out
                            console.log('Firebase user logout');
                            currentUser = null;
                            window.currentUser = null;
                            showLoginScreen();
                        }
                    });
                } else {
                    console.log('âŒ Firebase authentication not available - initialization failed or missing');
                    console.log('âŒ isFirebaseInitialized:', isFirebaseInitialized);
                    console.log('âŒ firebase available:', typeof firebase !== 'undefined');
                    console.log('âŒ firebase.auth available:', typeof firebase !== 'undefined' && !!firebase.auth);
                    console.log('âŒ firebaseApp:', !!firebaseApp);
                    // Firebaseåˆ©ç”¨ä¸å¯ã®å ´åˆã¯ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã‚’è¡¨ç¤º
                    showLoginScreen();
                    console.log('ğŸ“ Firebaseåˆ©ç”¨ä¸å¯ - ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢è¡¨ç¤º');
                }
                
                setupEventListeners();
                
                // åˆæœŸåŒ–å®Œäº† - ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹è§£é™¤ï¼ˆèªè¨¼çŠ¶æ…‹ç¢ºå®šå¾Œï¼‰
                setTimeout(() => {
                    completeInitialization();
                }, 300);
            } catch (error) {
                console.error('âŒ åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:', error);
                // ã‚¨ãƒ©ãƒ¼æ™‚ã‚‚loadingã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã‚’è¡¨ç¤º
                completeInitialization();
                const loginScreen = document.getElementById('loginScreen');
                if (loginScreen) {
                    loginScreen.style.display = 'flex';
                    loginScreen.style.opacity = '1';
                }
                showAuthError('åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚');
            }
        });

        function showLoginScreen() {
            // loadingçŠ¶æ…‹ã‚’è§£é™¤ã—ã¦ç”»é¢è¡¨ç¤ºã‚’ç¢ºå®Ÿã«ã™ã‚‹
            completeInitialization();
            
            const loginScreen = document.getElementById('loginScreen');
            const mainContent = document.getElementById('mainContent');
            if (loginScreen && mainContent) {
                // ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’éè¡¨ç¤º
                mainContent.style.display = 'none';
                mainContent.style.opacity = '0';
                mainContent.style.visibility = 'hidden';
                mainContent.classList.remove('loaded');
                
                // ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã‚’æ»‘ã‚‰ã‹ã«è¡¨ç¤º
                loginScreen.style.display = 'flex';
                loginScreen.style.visibility = 'visible';
                
                // ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                requestAnimationFrame(() => {
                    loginScreen.style.opacity = '1';
                });
                
                console.log('ğŸ“ ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢è¡¨ç¤ºå®Œäº†');
            } else {
                console.error('âŒ ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢è¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
            }
        }

        function showMainContent(user) {
            console.log('Showing main content for user:', user?.email);
            
            // loadingçŠ¶æ…‹ã‚’è§£é™¤ã—ã¦ç”»é¢è¡¨ç¤ºã‚’ç¢ºå®Ÿã«ã™ã‚‹
            completeInitialization();
            
            const loginScreen = document.getElementById('loginScreen');
            const mainContent = document.getElementById('mainContent');
            const userDisplay = document.getElementById('userDisplayName');
            
            if (loginScreen && mainContent) {
                // ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã‚’ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆ
                loginScreen.style.opacity = '0';
                setTimeout(() => {
                    loginScreen.style.display = 'none';
                    loginScreen.style.visibility = 'hidden';
                }, 200);
                
                // ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¡¨ç¤º
                mainContent.style.display = 'block';
                mainContent.style.visibility = 'visible';
                
                // ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                requestAnimationFrame(() => {
                    mainContent.style.opacity = '1';
                    mainContent.classList.add('fade-in');
                });
                
                // Update user display
                if (userDisplay) {
                    const displayName = user?.displayName || user?.email || 'Gallery User';
                    userDisplay.textContent = displayName;
                }
                
                // Sync authentication state with app.js
                window.currentUser = user;
                window.isAuthenticated = true;
                currentUser = user;
                
                // Update app.js authentication state if available
                if (typeof window.updateAuthState === 'function') {
                    window.updateAuthState(user, true);
                    console.log('âœ… app.jsèªè¨¼çŠ¶æ…‹ã‚’åŒæœŸã—ã¾ã—ãŸ');
                }
                
                // Add loaded animation
                setTimeout(() => {
                    mainContent.classList.add('loaded');
                    console.log('Main content animation completed');
                }, 100);
                
                console.log('Screen switch completed successfully');
            } else {
                console.error('Required elements not found:', { loginScreen: !!loginScreen, mainContent: !!mainContent });
            }
        }

        function setupEventListeners() {
            try {
                // Debug: Check form accessibility
                console.log('Setting up event listeners...');
                const emailInput = document.getElementById('loginEmail');
                const passwordInput = document.getElementById('loginPassword');
                
                if (emailInput) {
                    console.log('Email input found:', emailInput);
                    emailInput.addEventListener('focus', () => console.log('Email input focused'));
                    emailInput.addEventListener('input', () => console.log('Email input changed:', emailInput.value));
                } else {
                    console.error('Email input not found!');
                }
                
                if (passwordInput) {
                    console.log('Password input found:', passwordInput);
                    passwordInput.addEventListener('focus', () => console.log('Password input focused'));
                    passwordInput.addEventListener('input', () => console.log('Password input changed'));
                } else {
                    console.error('Password input not found!');
                }
                
                // Auth tab switching
                const authTabs = document.querySelectorAll('.unite-auth-tab');
                authTabs.forEach(tab => {
                    tab.addEventListener('click', function() {
                        const targetTab = this.getAttribute('data-tab');
                        document.querySelectorAll('.unite-auth-tab').forEach(t => t.classList.remove('active'));
                        this.classList.add('active');
                        
                        document.querySelectorAll('.unite-auth-content').forEach(content => {
                            content.style.display = 'none';
                        });
                        document.getElementById(targetTab + 'Auth').style.display = 'block';
                    });
                });

                // Email login form
                const emailForm = document.getElementById('emailLoginForm');
                if (emailForm) {
                    emailForm.addEventListener('submit', function(e) {
                        e.preventDefault();
                        console.log('ğŸ“ Email login form submitted');
                        handleEmailLogin();
                    });
                }
                
                // Login button click handler (backup)
                const loginBtn = document.querySelector('.unite-login-btn');
                if (loginBtn) {
                    loginBtn.addEventListener('click', function(e) {
                        e.preventDefault();
                        console.log('ğŸ“ Login button clicked directly');
                        handleEmailLogin();
                    });
                }

                // Google login button
                const googleBtn = document.getElementById('googleLoginButton');
                if (googleBtn) {
                    googleBtn.addEventListener('click', function() {
                        handleGoogleLogin();
                    });
                }



                // Logout button
                const logoutBtn = document.getElementById('logoutBtn');
                if (logoutBtn) {
                    logoutBtn.addEventListener('click', function() {
                        handleLogout();
                    });
                }

                // Period tab functionality
                const periodTabs = document.querySelectorAll('.unite-period-tab');
                periodTabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        document.querySelectorAll('.unite-period-tab').forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                    });
                });

                // Action button functionality - now works after login
                const actionButtons = document.querySelectorAll('[data-tab]');
                actionButtons.forEach(btn => {
                    btn.addEventListener('click', function() {
                        const tab = this.getAttribute('data-tab');
                        if (tab && currentUser) {
                            // User is authenticated, handle tab switching
                            console.log('Switching to tab:', tab);
                            // Add your tab switching logic here
                        }
                    });
                });
            } catch (error) {
                console.error('Event listener setup error:', error);
            }
        }

        function handleEmailLogin() {
            console.log('ğŸ“ handleEmailLogin function called');
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            console.log('ğŸ“ Login attempt with email:', email.substring(0, 5) + '...');

            // Firebase UIDãƒ™ãƒ¼ã‚¹ã®èªè¨¼ã‚·ã‚¹ãƒ†ãƒ 
            const authorizedUID = 'IbuYD2GuBTdS55LY5uuzBsHIF7s2';
            
            console.log('ğŸ“ Attempting Firebase Authentication...');
            
            // FirebaseçŠ¶æ…‹ã®è©³ç´°ãƒã‚§ãƒƒã‚¯
            console.log('ğŸ” FirebaseçŠ¶æ…‹ãƒã‚§ãƒƒã‚¯:');
            console.log('  - isFirebaseInitialized:', isFirebaseInitialized);
            console.log('  - firebase available:', typeof firebase !== 'undefined');
            console.log('  - firebase.auth available:', typeof firebase !== 'undefined' && !!firebase.auth);
            console.log('  - firebaseApp:', !!firebaseApp);
            
            if (!isFirebaseInitialized) {
                console.log('âŒ Firebase not initialized - attempting reinitialization...');
                const reinitSuccess = initializeFirebase();
                if (!reinitSuccess) {
                    showAuthError('Firebaseèªè¨¼ã‚µãƒ¼ãƒ“ã‚¹ã®åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚');
                    return;
                }
            }
            
            if (typeof firebase === 'undefined' || !firebase.auth) {
                console.log('âŒ Firebase Auth service unavailable');
                showAuthError('Firebaseèªè¨¼ã‚µãƒ¼ãƒ“ã‚¹ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            // Firebase Authenticationã§ãƒ­ã‚°ã‚¤ãƒ³
            firebase.auth().signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    console.log('âœ… Firebase authentication successful');
                    console.log('ğŸ“ User UID:', user.uid);
                    console.log('ğŸ“ Expected UID:', authorizedUID);
                    
                    // UIDãƒã‚§ãƒƒã‚¯
                    if (user.uid === authorizedUID) {
                        console.log('âœ… Authorized UID confirmed - access granted');
                        
                        // Set authentication state
                        currentUser = user;
                        window.currentUser = user;
                        window.isAuthenticated = true;
                        
                        hideAuthError();
                        showMainContent(user);
                        console.log('âœ… Firebase UID login completed successfully');
                    } else {
                        console.log('âŒ Unauthorized UID - access denied');
                        console.log('âŒ User UID:', user.uid);
                        console.log('âŒ Expected UID:', authorizedUID);
                        
                        // Sign out unauthorized user
                        firebase.auth().signOut();
                        showAuthError('ã“ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯è¨±å¯ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚');
                    }
                })
                .catch((error) => {
                    console.log('âŒ Firebase authentication failed:', error.code, error.message);
                    
                    let errorMessage = 'èªè¨¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚';
                    if (error.code === 'auth/user-not-found') {
                        errorMessage = 'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚';
                    } else if (error.code === 'auth/wrong-password') {
                        errorMessage = 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚';
                    } else if (error.code === 'auth/invalid-email') {
                        errorMessage = 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚';
                    } else if (error.code === 'auth/too-many-requests') {
                        errorMessage = 'ãƒ­ã‚°ã‚¤ãƒ³è©¦è¡Œå›æ•°ãŒä¸Šé™ã«é”ã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãæ™‚é–“ã‚’ãŠã„ã¦ã‹ã‚‰å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚';
                    }
                    
                    showAuthError(errorMessage);
                });
            
            return;

            // FirebaseãŒæœ‰åŠ¹ã§æœ¬ç•ªè¨­å®šã®å ´åˆã®ã¿å®Ÿéš›ã®èªè¨¼ã‚’è©¦ã¿ã‚‹
            // ãƒ‡ãƒ¢ç’°å¢ƒã§ã¯Firebaseèªè¨¼ã‚’å®Œå…¨ã«ã‚¹ã‚­ãƒƒãƒ—ã—ã¦ã‚¨ãƒ©ãƒ¼ã‚’é˜²æ­¢
            const isValidFirebaseConfig = typeof firebase !== 'undefined' && 
                firebase.auth && firebaseApp && 
                firebaseConfig.apiKey && 
                !firebaseConfig.apiKey.includes('Demo') &&
                !firebaseConfig.apiKey.includes('demo') &&
                firebaseConfig.apiKey.length > 30; // æœ‰åŠ¹ãªAPIã‚­ãƒ¼ã¯é€šå¸¸30æ–‡å­—ä»¥ä¸Š
            
            if (isValidFirebaseConfig) {
                console.log('Valid Firebase configuration found, attempting authentication');
                firebase.auth().signInWithEmailAndPassword(email, password)
                    .then((userCredential) => {
                        const user = userCredential.user;
                        const authorizedUID = 'IbuYD2GuBTdS55LY5uuzBsHIF7s2';
                        
                        // Check if the user's UID matches the authorized UID
                        if (user.uid === authorizedUID) {
                            hideAuthError();
                            console.log('âœ“ Firebaseèªè¨¼æˆåŠŸ - è¨±å¯ã•ã‚ŒãŸUID');
                        } else {
                            // Sign out unauthorized user
                            firebase.auth().signOut();
                            showAuthError('ã“ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯è¨±å¯ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚');
                            console.log('Firebaseèªè¨¼æˆåŠŸbut unauthorized UID:', user.uid);
                        }
                    })
                    .catch((error) => {
                        console.error('Firebase authentication error:', error);
                        console.log('Firebase authentication error, falling back to demo mode');
                        
                        showAuthError('Authentication failed. Please check your email and password.');
                    });
            } else {
                // FirebaseãŒç„¡åŠ¹ã®å ´åˆã§ã‚‚è¨±å¯ã•ã‚ŒãŸã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
                console.log('Firebase not available - only authorized accounts allowed');
                showAuthError('èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚è¨±å¯ã•ã‚ŒãŸã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚');
            }
        }

        function handleGoogleLogin() {
            if (typeof firebase !== 'undefined' && firebase.auth && firebaseApp) {
                const provider = new firebase.auth.GoogleAuthProvider();
                firebase.auth().signInWithPopup(provider)
                    .then((result) => {
                        // Success - onAuthStateChanged will handle UI update
                        hideAuthError();
                    })
                    .catch((error) => {
                        showAuthError(error.message);
                    });
            } else {
                console.log('âŒ Firebase not available for Google login');
                showAuthError('Firebaseèªè¨¼ã‚µãƒ¼ãƒ“ã‚¹ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚');
            }
        }



        function handleLogout() {
            if (typeof firebase !== 'undefined' && firebase.auth && firebaseApp) {
                firebase.auth().signOut().then(() => {
                    // Success - onAuthStateChanged will handle UI update
                }).catch((error) => {
                    console.error('Logout error:', error);
                });
            } else {
                // Demo mode
                currentUser = null;
                showLoginScreen();
                const mainContent = document.getElementById('mainContent');
                if (mainContent) {
                    mainContent.classList.remove('loaded');
                }
            }
        }

        function showAuthError(message) {
            const errorDiv = document.getElementById('authError');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
        }

        function hideAuthError() {
            document.getElementById('authError').style.display = 'none';
        }
        
        // Add smooth scrolling behavior
        document.documentElement.style.scrollBehavior = 'smooth';
        
        // å®‰å…¨è£…ç½®: 3ç§’å¾Œã«loadingçŠ¶æ…‹ãŒæ®‹ã£ã¦ã„ã‚‹å ´åˆã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
        setTimeout(() => {
            if (document.body.classList.contains('loading')) {
                console.warn('âš ï¸ LoadingçŠ¶æ…‹ãŒæ®‹å­˜ - ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè¡Œ');
                completeInitialization();
                // ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã‚‚ç¢ºå®Ÿã«è¡¨ç¤º
                const loginScreen = document.getElementById('loginScreen');
                if (loginScreen) {
                    loginScreen.style.display = 'flex';
                    loginScreen.style.opacity = '1';
                }
                showAuthError('èª­ã¿è¾¼ã¿ã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã¾ã™ã€‚ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚');
            }
        }, 3000);
    </script>
    
</body>
</html>